{% extends "base.html" %}

{% block title %}
URL Shortener
{% endblock %}

{% block content %}


<form action="#" method="post">

    <div class="jumbotron">

        {% if not valid %}

            <p class="text-danger">Invalid url try again</p>

        {% endif %}
        <h1 class="display-4">Shorten Url</h1>


        <div class="form-group">
            <input type="text" name="url" class="form-control" id="url" value="" aria-describedby="emailHelp" placeholder="Enter Url">

            <h1 class="display-4">Url Modifier</h1>
            
            <input type="text" name="modifier" class="form-control" id="modifier" value="" aria-describedby="emailHelp" placeholder="url modifier">
        </div>

        <button type="submit" class="btn btn-primary">Shorten</button>
        
    </div>

    {% if url %}

    <div class="jumbotron">
        <h1 class="display-4">Shortened Url</h1>

        <div id="copyme"><a href={{url}}>{{url}}</a></div>        

        <input id="clickMe" class="btn btn-primary" type="button" value="Copy to clipboard" onclick="clip_div('copyme')">
        
    </div>

    {% else %}

        <p> The resulting url will be a link
            directing to this site followed
            by the entered url modifier followed
            by the unique key generated for the url.
        </p>



    {% endif %}


</form>

<script>
    function clip_text(a_string){
        var input = document.createElement('input')
        input.id="__copyText__";
        input.value = a_string;
        document.body.appendChild(input);
        input.select();
        document.execCommand("copy");
        var txt = input.value
        input.remove()
    }
    function clip_div(divId){
       return clip_text(document.getElementById(divId).innerText)
    }
    </script>
{% endblock %}